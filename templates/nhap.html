<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Chỉnh sửa thí sinh</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        .tabs {
            margin-bottom: 20px;
        }

        .tab-button {
            background-color: #ddd;
            border: none;
            padding: 10px 20px;
            margin-right: 5px;
            cursor: pointer;
            font-weight: bold;
            border-radius: 5px 5px 0 0;
        }

        .tab-button.active {
            background-color: #4285f4;
            color: white;
        }

        .tab-content {
            display: none;
            border: 1px solid #ccc;
            padding: 20px;
            border-radius: 0 5px 5px 5px;
            background: #f9f9f9;
        }

        .tab-content.active {
            display: block;
        }

        label {
            display: block;
            margin-top: 10px;
        }

        input, select {
            width: 100%;
            padding: 6px;
            margin-top: 5px;
            box-sizing: border-box;
        }

        .row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
    </style>
</head>
<body>

<h2>Chỉnh sửa thông tin thí sinh</h2>

<div class="tabs">
    <button class="tab-button active" onclick="openTab(event, 'hosochung')">Hồ sơ chung</button>
    <button class="tab-button" onclick="openTab(event, 'caodang')">Cao đẳng</button>
    <button class="tab-button" onclick="openTab(event, 'trungcap')">Trung cấp</button>
    <button class="tab-button" onclick="openTab(event, 'lienthong')">Liên thông</button>
    <button class="tab-button" onclick="openTab(event, 'bosung')">Bổ sung</button>
</div>

<form method="POST" action="{{ url_for('edit', matsxt=ts.Matsxt) }}">
    {{ form.hidden_tag() }}

    <!-- Hồ sơ chung -->
    <div id="hosochung" class="tab-content active">
        <label>Mã TSXT:</label>
        <input type="text" name="Matsxt" value="{{ ts.Matsxt }}" readonly>

        <label>Họ và tên:</label>
        <div class="row">
            <input type="text" name="Holot" value="{{ ts.Holot or '' }}" placeholder="Họ lót">
            <input type="text" name="Ten" value="{{ ts.Ten or '' }}" placeholder="Tên">
        </div>

        <label>Ngày sinh:</label>
        <input type="date" name="Ngaysinh" value="{{ ts.Ngaysinh.strftime('%Y-%m-%d') if ts.Ngaysinh else '' }}">

        <label>Giới tính:</label>
        <select name="Gioitinh">
            <option value="1" {% if ts.Gioitinh == 1 %}selected{% endif %}>Nam</option>
            <option value="0" {% if ts.Gioitinh == 0 %}selected{% endif %}>Nữ</option>
        </select>

        <label>Hộ khẩu / Địa chỉ:</label>
        <input type="text" name="Hokhau" value="{{ ts.Hokhau or '' }}">
    </div>

    <!-- Cao đẳng -->
    <div id="caodang" class="tab-content">
        <label>Nguyện vọng 1:</label>
        <select name="MaNV1">
            {% for nv in nguyenvong %}
                <option value="{{ nv.MaNV }}" {% if tsnv.MaNV1 == nv.MaNV %}selected{% endif %}>{{ nv.TenNV }}</option>
            {% endfor %}
        </select>

        <label>Môn xét tuyển 1:</label>
        <input type="text" name="Mon1" value="{{ diem.Mon1 or '' }}">

        <label>Điểm môn 1:</label>
        <input type="number" step="0.1" name="Diem1" value="{{ diem.Diem1 or '' }}">
    </div>

    <!-- Trung cấp -->
    <div id="trungcap" class="tab-content">
        <label>Nguyện vọng 2:</label>
        <select name="MaNV2">
            {% for nv in nguyenvong %}
                <option value="{{ nv.MaNV }}" {% if tsnv.MaNV2 == nv.MaNV %}selected{% endif %}>{{ nv.TenNV }}</option>
            {% endfor %}
        </select>

        <label>Môn xét tuyển 2:</label>
        <input type="text" name="Mon2" value="{{ diem.Mon2 or '' }}">

        <label>Điểm môn 2:</label>
        <input type="number" step="0.1" name="Diem2" value="{{ diem.Diem2 or '' }}">
    </div>

    <!-- Liên thông -->
    <div id="lienthong" class="tab-content">
        <label>Nguyện vọng 3:</label>
        <select name="MaNV3">
            {% for nv in nguyenvong %}
                <option value="{{ nv.MaNV }}" {% if tsnv.MaNV3 == nv.MaNV %}selected{% endif %}>{{ nv.TenNV }}</option>
            {% endfor %}
        </select>

        <label>Môn xét tuyển 3:</label>
        <input type="text" name="Mon3" value="{{ diem.Mon3 or '' }}">

        <label>Điểm môn 3:</label>
        <input type="number" step="0.1" name="Diem3" value="{{ diem.Diem3 or '' }}">
    </div>

    <!-- Bổ sung -->
    <div id="bosung" class="tab-content">
        <label>Đối tượng ưu tiên:</label>
        <select name="Doituong">
            <option value="">--Chọn--</option>
            <option value="1" {% if ts.Doituong == '1' %}selected{% endif %}>Ưu tiên 1</option>
            <option value="2" {% if ts.Doituong == '2' %}selected{% endif %}>Ưu tiên 2</option>
        </select>

        <label>Khu vực:</label>
        <select name="Khuvuc">
            <option value="">--Chọn--</option>
            <option value="KV1" {% if ts.Khuvuc == 'KV1' %}selected{% endif %}>KV1</option>
            <option value="KV2" {% if ts.Khuvuc == 'KV2' %}selected{% endif %}>KV2</option>
            <option value="KV3" {% if ts.Khuvuc == 'KV3' %}selected{% endif %}>KV3</option>
        </select>
    </div>

    <br>
    <button type="submit">Lưu thay đổi</button>
</form>

<script>
function openTab(evt, tabName) {
    let i;
    const tabContents = document.getElementsByClassName("tab-content");
    const tabButtons = document.getElementsByClassName("tab-button");

    for (i = 0; i < tabContents.length; i++) {
        tabContents[i].classList.remove("active");
    }

    for (i = 0; i < tabButtons.length; i++) {
        tabButtons[i].classList.remove("active");
    }

    document.getElementById(tabName).classList.add("active");
    evt.currentTarget.classList.add("active");
}
</script>

</body>
</html>
